<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CSS çµ‚æ¥µç™¾ç§‘å…¨æ›¸ (The Ultimate CSS Encyclopedia)</title>
  <style>
    /* =========================================
       0. Core & Reset
       ========================================= */
    :root {
      --primary: #4f46e5;
      --primary-light: #e0e7ff;
      --secondary: #db2777;
      --accent: #7c3aed;
      --success: #16a34a;
      --warning: #d97706;
      --error: #dc2626;
      --text: #334155;
      --bg: #f8fafc;
      --border: #cbd5e1;
      --code-bg: #1e293b;
      --code-text: #e2e8f0;
    }

    * { box-sizing: border-box; }
    
    html { scroll-behavior: smooth; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background-color: var(--bg);
      color: var(--text);
      line-height: 1.6;
      margin: 0;
      padding-left: 280px; /* Sidebar width */
    }

    /* Scroll Progress Bar (Global) */
    .scroll-progress {
      position: fixed; top: 0; left: 0; right: 0; height: 4px;
      background: linear-gradient(to right, var(--primary), var(--secondary));
      transform-origin: 0%;
      animation: scroll-progress auto linear;
      animation-timeline: scroll();
      z-index: 9999;
    }
    @keyframes scroll-progress { from { transform: scaleX(0); } to { transform: scaleX(1); } }

    /* =========================================
       Sidebar Navigation
       ========================================= */
    nav {
      width: 280px; height: 100vh;
      background: white; border-right: 1px solid var(--border);
      position: fixed; left: 0; top: 0;
      overflow-y: auto; padding: 20px;
      z-index: 100;
      box-shadow: 4px 0 24px rgba(0,0,0,0.02);
    }
    nav h1 { font-size: 1.25rem; margin: 0 0 20px 0; color: var(--primary); padding-bottom: 15px; border-bottom: 2px solid var(--primary-light); }
    nav ul { list-style: none; padding: 0; }
    nav li { margin-bottom: 4px; }
    nav a {
      text-decoration: none; color: #64748b; display: block; padding: 8px 12px;
      border-radius: 6px; font-size: 0.9rem; font-weight: 500; transition: all 0.2s;
    }
    nav a:hover { background: var(--primary-light); color: var(--primary); transform: translateX(4px); }
    nav .section-title { font-size: 0.75rem; text-transform: uppercase; color: #94a3b8; margin: 20px 0 5px 10px; font-weight: 700; letter-spacing: 0.05em; }

    /* =========================================
       Main Content Layout
       ========================================= */
    main { padding: 40px; max-width: 1000px; margin: 0 auto; }
    
    section {
      background: white; border-radius: 12px; padding: 30px; margin-bottom: 60px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1); border: 1px solid var(--border);
      scroll-margin-top: 20px;
    }

    h2 { margin-top: 0; color: var(--text); border-bottom: 1px solid var(--border); padding-bottom: 15px; display: flex; align-items: center; gap: 10px; }
    h2::before { content: '#'; color: var(--primary); opacity: 0.5; }
    h3 { margin-top: 30px; font-size: 1.1rem; color: #475569; display: flex; align-items: center; gap: 8px; }
    h3::before { content: ''; width: 6px; height: 6px; background: var(--secondary); border-radius: 50%; display: inline-block; }

    /* Code Block Styles */
    details { margin-top: 15px; border: 1px solid var(--border); border-radius: 8px; overflow: hidden; }
    summary { background: #f8fafc; padding: 10px 15px; cursor: pointer; font-size: 0.85rem; font-weight: 600; color: var(--primary); user-select: none; }
    summary:hover { background: #f1f5f9; }
    pre { margin: 0; padding: 20px; background: var(--code-bg); color: var(--code-text); overflow-x: auto; font-family: ui-monospace, SFMono-Regular, Menlo, monospace; font-size: 0.85rem; }
    
    /* Syntax Highlighting */
    .sel { color: #a5b4fc; } /* Selector */
    .prop { color: #93c5fd; } /* Property */
    .val { color: #fca5a5; } /* Value */
    .cmmt { color: #94a3b8; font-style: italic; } /* Comment */
    .tag  { color: #5eead4; } /* HTML Tag */

    /* =========================================
       SECTION 1: Selectors (The Encyclopedia)
       ========================================= */
    
    /* 1.1 Basic & Combinators */
    .combinator-demo { padding: 15px; border: 1px dashed #ccc; background: #f8fafc; margin-bottom: 10px; }
    .combinator-demo div { padding: 10px; background: white; border: 1px solid #ddd; margin: 5px; border-radius: 4px; }
    
    /* Child (>) */
    .child-demo > .target { background: #bbf7d0; border-color: #22c55e; }
    .child-demo > .target::after { content: " (æˆ‘æ˜¯ç›´æ¥å­å…ƒç´  >)"; font-size: 0.8em; color: green; }
    
    /* Adjacent (+) */
    .adjacent-trigger { background: var(--primary) !important; color: white; cursor: default; }
    .adjacent-trigger + div { background: #fbcfe8 !important; border-color: var(--secondary) !important; }
    .adjacent-trigger + div::after { content: " (æˆ‘æ˜¯ç·Šé„°å…„å¼Ÿ +)"; font-size: 0.8em; color: var(--secondary); }

    /* General Sibling (~) */
    .general-trigger { background: var(--accent) !important; color: white; }
    .general-trigger ~ div { opacity: 0.5; transform: scale(0.98); }

    /* 1.2 Attribute Selectors */
    .attr-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; }
    .attr-box { padding: 10px; background: white; border: 1px solid #ddd; text-align: center; font-size: 0.9rem; border-radius: 6px; }
    
    [data-type] { border-left: 4px solid #94a3b8; }
    [data-type="primary"] { border-left-color: var(--primary); background: #e0e7ff; }
    [data-type^="warn"] { border-left-color: var(--warning); color: var(--warning); } /* Starts with */
    [data-type$="error"] { border-left-color: var(--error); color: var(--error); } /* Ends with */
    [data-type*="cc"] { text-decoration: underline; text-decoration-style: wavy; } /* Contains */

    /* 1.3 Structural Pseudo-classes */
    .nth-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; margin-bottom: 10px; }
    .nth-box { background: #e2e8f0; padding: 10px; text-align: center; border-radius: 4px; font-size: 0.8rem; }
    
    .nth-grid :first-child { background: var(--success); color: white; }
    .nth-grid :last-child { background: var(--error); color: white; }
    .nth-grid :nth-child(even) { border: 2px solid white; }
    .nth-grid :nth-child(4n) { transform: translateY(-5px); background: var(--primary); color: white; }

    /* 1.4 UI State Pseudo-classes */
    .state-demo form { display: grid; gap: 10px; max-width: 400px; }
    .state-demo input { padding: 8px; border: 2px solid #ddd; border-radius: 4px; outline: none; }
    
    .state-demo input:focus { border-color: var(--primary); }
    .state-demo input:disabled { background: #f1f5f9; cursor: not-allowed; opacity: 0.7; }
    .state-demo input:checked + span { color: var(--success); font-weight: bold; }
    .state-demo input:required { border-right: 4px solid var(--warning); }
    .state-demo input:optional { border-right: 4px solid #ddd; }

    /* 1.5 Pseudo-elements */
    .pseudo-elem-demo p::first-letter { font-size: 2em; color: var(--primary); float: left; line-height: 1; margin-right: 5px; font-weight: bold; }
    .pseudo-elem-demo p::first-line { color: #475569; font-weight: 600; }
    .pseudo-elem-demo p::selection { background: var(--secondary); color: white; }
    .marker-demo li::marker { color: var(--secondary); content: "ğŸ‘‰ "; }

    /* 1.6 Logic Pseudo-classes (:is, :where, :not, :has) */
    .logic-demo .card { padding: 10px; margin: 5px 0; border: 1px solid #ddd; border-radius: 6px; transition: 0.2s; }
    
    /* :not() */
    .logic-list button:not(.primary) { opacity: 0.6; }
    
    /* :has() - The most powerful one */
    .logic-demo .card:has(input:checked) { background: #f0fdf4; border-color: var(--success); transform: scale(1.02); box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
    .logic-demo .card:has(button.delete:hover) { background: #fef2f2; border-color: var(--error); }

    /* =========================================
       SECTION 2: Specificity (æ¬Šé‡)
       ========================================= */
    .spec-battle { display: flex; gap: 20px; align-items: flex-start; }
    .spec-card { flex: 1; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: white; }
    .spec-score { font-family: monospace; font-size: 1.2rem; margin-bottom: 10px; display: block; color: #64748b; }
    
    /* Visualization of Specificity */
    #id-wins { color: var(--primary); } /* ID: 1,0,0 */
    .class-loses { color: var(--error); } /* Class: 0,1,0 */
    
    .spec-visualizer { margin-top: 20px; }
    .spec-bar { height: 8px; background: #e2e8f0; border-radius: 4px; margin-bottom: 5px; position: relative; overflow: hidden; }
    .spec-bar-fill { height: 100%; position: absolute; left: 0; top: 0; }

    /* =========================================
       SECTION 3: Layouts (Interactive)
       ========================================= */
    /* Checkbox/Radio Hack Controllers */
    .ctrl-group { margin-bottom: 15px; }
    .ctrl-title { font-size: 0.85rem; font-weight: 700; color: #64748b; margin-bottom: 5px; text-transform: uppercase; }
    .hack-radio { display: none; }
    .ctrl-labels { display: flex; gap: 5px; flex-wrap: wrap; }
    .ctrl-labels label {
      padding: 6px 12px; background: white; border: 1px solid var(--border); border-radius: 20px;
      font-size: 0.85rem; cursor: pointer; user-select: none; transition: 0.1s;
    }
    .hack-radio:checked + label { background: var(--primary); color: white; border-color: var(--primary); box-shadow: 0 2px 4px rgba(79, 70, 229, 0.3); }

    /* Flexbox Engine */
    #f-dir-row:checked ~ .flex-box-container { flex-direction: row; }
    #f-dir-col:checked ~ .flex-box-container { flex-direction: column; }
    #f-wrap-no:checked ~ .flex-box-container { flex-wrap: nowrap; }
    #f-wrap-yes:checked ~ .flex-box-container { flex-wrap: wrap; }
    #f-jus-start:checked ~ .flex-box-container { justify-content: flex-start; }
    #f-jus-center:checked ~ .flex-box-container { justify-content: center; }
    #f-jus-end:checked ~ .flex-box-container { justify-content: flex-end; }
    #f-jus-between:checked ~ .flex-box-container { justify-content: space-between; }
    #f-ali-start:checked ~ .flex-box-container { align-items: flex-start; }
    #f-ali-center:checked ~ .flex-box-container { align-items: center; }
    #f-ali-end:checked ~ .flex-box-container { align-items: flex-end; }
    #f-ali-stretch:checked ~ .flex-box-container { align-items: stretch; }

    .flex-box-container {
      display: flex; gap: 10px; padding: 20px; background: #f1f5f9; border-radius: 8px;
      min-height: 250px; transition: 0.3s; border: 1px solid var(--border);
    }
    .fb-item {
      width: 60px; height: 60px; background: var(--accent); color: white;
      display: flex; align-items: center; justify-content: center; font-weight: bold; border-radius: 8px;
      font-size: 1.2rem;
    }
    .fb-item:nth-child(2) { height: 80px; background: var(--secondary); }
    .fb-item:nth-child(3) { height: 50px; background: var(--warning); }
    .fb-item:nth-child(4) { width: 100px; background: var(--success); }

    /* Grid Areas */
    .grid-area-demo {
      display: grid;
      grid-template-areas: 
        "header header"
        "sidebar main"
        "footer footer";
      grid-template-columns: 1fr 3fr;
      grid-template-rows: 60px 200px 60px;
      gap: 10px;
    }
    .ga-box { display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; border-radius: 6px; }
    .ga-header { grid-area: header; background: var(--primary); }
    .ga-sidebar { grid-area: sidebar; background: var(--secondary); }
    .ga-main { grid-area: main; background: #64748b; }
    .ga-footer { grid-area: footer; background: var(--text); }

    /* =========================================
       SECTION 4: Advanced Patterns (The Good Stuff)
       ========================================= */
    
    /* 4.1 Floating Label */
    .float-group { position: relative; margin-top: 25px; max-width: 300px; }
    .float-group input {
      width: 100%; padding: 12px 10px; border: 2px solid var(--border); border-radius: 6px; outline: none; background: transparent; font-size: 1rem;
    }
    .float-group label {
      position: absolute; left: 10px; top: 50%; transform: translateY(-50%);
      background: white; padding: 0 5px; color: #94a3b8; pointer-events: none; transition: 0.2s cubic-bezier(0.4,0,0.2,1);
    }
    .float-group input:focus { border-color: var(--primary); }
    /* The Magic */
    .float-group input:focus + label,
    .float-group input:not(:placeholder-shown) + label {
      top: 0; font-size: 0.75rem; color: var(--primary); font-weight: 600;
    }

    /* 4.2 Friendly Validation */
    .valid-input { padding: 10px; width: 100%; border: 2px solid var(--border); border-radius: 6px; outline: none; }
    /* Not placeholder shown AND Invalid */
    .valid-input:not(:placeholder-shown):invalid { border-color: var(--error); background: #fef2f2; }
    .valid-input:not(:placeholder-shown):valid { border-color: var(--success); }
    .err-msg { display: none; color: var(--error); font-size: 0.85rem; margin-top: 5px; }
    .valid-input:not(:placeholder-shown):invalid ~ .err-msg { display: block; }

    /* 4.3 RAM Layout */
    .ram-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px;
    }
    .ram-item { background: #e0e7ff; padding: 20px; text-align: center; border-radius: 8px; font-weight: bold; color: var(--primary); }

    /* 4.4 Pure CSS Sidebar (Checkbox Hack) */
    .sidebar-trigger-btn {
      padding: 10px 20px; background: var(--text); color: white; border-radius: 6px; cursor: pointer; display: inline-block;
    }
    #sidebar-check { display: none; }
    
    .hidden-sidebar {
      position: fixed; top: 0; right: -300px; width: 300px; height: 100%;
      background: white; box-shadow: -5px 0 20px rgba(0,0,0,0.1);
      transition: right 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: 2000; padding: 20px;
    }
    .sidebar-overlay {
      position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 1999;
      opacity: 0; pointer-events: none; transition: opacity 0.3s;
    }
    .close-btn { float: right; cursor: pointer; font-size: 1.5rem; }

    /* Open State */
    #sidebar-check:checked ~ .hidden-sidebar { right: 0; }
    #sidebar-check:checked ~ .sidebar-overlay { opacity: 1; pointer-events: auto; }

  </style>
</head>
<body>

  <!-- Top Progress Bar -->
  <div class="scroll-progress"></div>

  <!-- Checkbox for Sidebar Demo -->
  <input type="checkbox" id="sidebar-check">

  <!-- Navigation -->
  <nav>
    <h1>CSS Encyclopedia</h1>
    
    <div class="section-title">Selectors</div>
    <ul>
      <li><a href="#sel-combinators">1. çµ„åˆé¸æ“‡å™¨ (Combinators)</a></li>
      <li><a href="#sel-attr">2. å±¬æ€§é¸æ“‡å™¨ (Attributes)</a></li>
      <li><a href="#sel-struct">3. çµæ§‹å½é¡ (Structural)</a></li>
      <li><a href="#sel-state">4. ç‹€æ…‹å½é¡ (State)</a></li>
      <li><a href="#sel-pseudo">5. å½å…ƒç´  (Pseudo-elements)</a></li>
      <li><a href="#sel-logic">6. é‚è¼¯å½é¡ (Modern Logic)</a></li>
    </ul>

    <div class="section-title">Concepts</div>
    <ul>
      <li><a href="#specificity">7. æ¬Šé‡ç«¶æŠ€å ´ (Specificity)</a></li>
      <li><a href="#boxmodel">8. ç›’æ¨¡å‹ (Box Model)</a></li>
    </ul>

    <div class="section-title">Layout Systems</div>
    <ul>
      <li><a href="#flexbox">9. Flexbox äº’å‹•å¯¦é©—å®¤</a></li>
      <li><a href="#grid">10. Grid ä½ˆå±€ç³»çµ±</a></li>
    </ul>

    <div class="section-title">Advanced</div>
    <ul>
      <li><a href="#patterns">11. å°ˆå®¶ç´šå¯¦æˆ° Patterns</a></li>
    </ul>
    <div class="section-title">JS Integration</div>
    <ul>
      <li><a href="#js-render">12. JS æ¸²æŸ“æ©Ÿåˆ¶å¯¦æˆ°</a></li>
    </ul>
    <div class="section-title">Bleeding Edge</div>
    <ul>
      <li><a href="#houdini">13. @property (Houdini)</a></li>
      <li><a href="#anchor-pos">14. Anchor Positioning</a></li>
      <li><a href="#view-trans">15. View Transitions</a></li>
    </ul>
  </nav>

  <!-- Hidden Sidebar Content -->
  <div class="sidebar-overlay">
    <label for="sidebar-check" style="position:absolute; inset:0;"></label>
  </div>
  <aside class="hidden-sidebar">
    <label for="sidebar-check" class="close-btn">&times;</label>
    <h2>å´é‚Šæ¬„ (Sidebar)</h2>
    <p>é€™æ˜¯ä½¿ç”¨ Checkbox Hack è£½ä½œçš„ç´” CSS å´é‚Šæ¬„ã€‚</p>
    <p>å®Œå…¨ä¸éœ€è¦ JavaScript å³å¯æ§åˆ¶é–‹é—œã€‚</p>
  </aside>

  <!-- Main Content -->
  <main>

    <!-- 1. Combinators -->
    <section id="sel-combinators">
      <h2>1. çµ„åˆé¸æ“‡å™¨ (Combinators)</h2>
      <p>æ§åˆ¶å…ƒç´ ä¹‹é–“çš„é—œä¿‚ã€‚</p>

      <h3>A. å­ä»£ (>) vs å¾Œä»£ (ç©ºç™½)</h3>
      <div class="combinator-demo child-demo">
        <div class="target">æˆ‘æ˜¯å…’å­ (div > .target)</div>
        <div>
          <div class="target">æˆ‘æ˜¯å­«å­ (å­«å­ä¸æœƒè¢«é¸ä¸­ï¼Œå› ç‚ºç”¨äº† >)</div>
        </div>
      </div>

      <h3>B. ç·Šé„° (+) vs é€šç”¨ (~) å…„å¼Ÿ</h3>
      <div class="combinator-demo">
        <div class="adjacent-trigger">åƒç…§ç‰© (Trigger)</div>
        <div>ç·Šé„°å…„å¼Ÿ (+)</div>
        <div>é€šç”¨å…„å¼Ÿ 1 (~)</div>
        <div>é€šç”¨å…„å¼Ÿ 2 (~)</div>
      </div>

      <details>
        <summary>æŸ¥çœ‹ CSS é—œéµå¯¦ä½œ</summary>
        <pre>
<span class="cmmt">/* 1. å¾Œä»£é¸æ“‡å™¨ (Descendant): ç©ºæ ¼ */</span>
<span class="sel">.parent .child</span> { ... } <span class="cmmt">/* é¸å–å…§éƒ¨æ‰€æœ‰ç¬¦åˆçš„å¾Œä»£ (å…’å­ã€å­«å­...) */</span>

<span class="cmmt">/* 2. å­ä»£é¸æ“‡å™¨ (Child): > */</span>
<span class="sel">.parent > .child</span> { 
  <span class="prop">border</span>: <span class="val">2px solid green</span>; 
} <span class="cmmt">/* åš´æ ¼é™åˆ¶ï¼šåªèƒ½é¸å–ã€Œå…’å­ã€å±¤ç´šï¼Œå­«å­ä¸é¸ */</span>

<span class="cmmt">/* 3. ç·Šé„°å…„å¼Ÿ (Adjacent Sibling): + */</span>
<span class="sel">.trigger + .next</span> { 
  <span class="prop">background</span>: <span class="val">red</span>; 
} <span class="cmmt">/* æ¢ä»¶ï¼šå¿…é ˆç·Šç·Šæ¥åœ¨å¾Œé¢ï¼Œä¸­é–“ä¸èƒ½æœ‰å…¶ä»–æ±è¥¿ */</span>

<span class="cmmt">/* 4. é€šç”¨å…„å¼Ÿ (General Sibling): ~ */</span>
<span class="sel">.trigger ~ .siblings</span> { 
  <span class="prop">opacity</span>: <span class="val">0.5</span>; 
} <span class="cmmt">/* æ¢ä»¶ï¼šåªè¦åœ¨å®ƒå¾Œé¢ä¸”åŒå±¤ç´šå³å¯ */</span></pre>
      </details>
    </section>

    <!-- 2. Attributes -->
    <section id="sel-attr">
      <h2>2. å±¬æ€§é¸æ“‡å™¨ (Attributes)</h2>
      <div class="attr-grid">
        <div class="attr-box" data-type="default">Default</div>
        <div class="attr-box" data-type="primary">Primary</div>
        <div class="attr-box" data-type="warn-light">Warning</div>
        <div class="attr-box" data-type="has-error-msg">Error</div>
        <div class="attr-box" data-type="acc-xyz">Contains 'cc'</div>
      </div>
      <details>
        <summary>æŸ¥çœ‹ CSS é—œéµå¯¦ä½œ</summary>
        <pre>
<span class="cmmt">/* å®Œå…¨åŒ¹é…ï¼šå±¬æ€§å€¼å¿…é ˆå®Œå…¨ä¸€æ¨£ */</span>
<span class="sel">[data-type="primary"]</span> { <span class="prop">color</span>: <span class="val">blue</span>; }

<span class="cmmt">/* é–‹é ­åŒ¹é… (^=): é©ç”¨æ–¼åƒ "warn-light", "warn-dark" é€™ç¨®å‘½å */</span>
<span class="sel">[data-type^="warn"]</span> { <span class="prop">color</span>: <span class="val">orange</span>; }

<span class="cmmt">/* çµå°¾åŒ¹é… ($=): é©ç”¨æ–¼æª”æ¡ˆé¡å‹é¸å–ï¼Œå¦‚ [href$=".pdf"] */</span>
<span class="sel">[data-type$="error"]</span> { <span class="prop">color</span>: <span class="val">red</span>; }

<span class="cmmt">/* æ¨¡ç³ŠåŒ…å« (*=): åªè¦å±¬æ€§å€¼è£¡æœ‰é€™æ®µæ–‡å­—å°±ç®—é¸ä¸­ */</span>
<span class="sel">[data-type*="cc"]</span> { <span class="prop">text-decoration</span>: <span class="val">underline</span>; }</pre>
      </details>
    </section>

    <!-- 3. Structural -->
    <section id="sel-struct">
      <h2>3. çµæ§‹å½é¡ (Structural)</h2>
      <p>åˆ©ç”¨æ•¸å­¸å…¬å¼é¸å–å…ƒç´ ã€‚</p>
      <div class="nth-grid">
        <div class="nth-box">1</div><div class="nth-box">2</div><div class="nth-box">3</div><div class="nth-box">4</div>
        <div class="nth-box">5</div><div class="nth-box">6</div><div class="nth-box">7</div><div class="nth-box">8</div>
        <div class="nth-box">9</div><div class="nth-box">10</div><div class="nth-box">11</div><div class="nth-box">12</div>
        <div class="nth-box">13</div><div class="nth-box">14</div>
      </div>
      <details>
        <summary>æŸ¥çœ‹ CSS é—œéµå¯¦ä½œ</summary>
        <pre>
<span class="cmmt">/* åŸºç¤æ¬¾ */</span>
<span class="sel">:first-child</span> { ... } <span class="cmmt">/* ç¬¬ä¸€å€‹ */</span>
<span class="sel">:last-child</span> { ... }  <span class="cmmt">/* æœ€å¾Œä¸€å€‹ */</span>

<span class="cmmt">/* å¥‡å¶æ•¸ */</span>
<span class="sel">:nth-child(odd)</span> { ... }  <span class="cmmt">/* 1, 3, 5... */</span>
<span class="sel">:nth-child(even)</span> { ... } <span class="cmmt">/* 2, 4, 6... */</span>

<span class="cmmt">/* å…¬å¼ï¼šan + b (n å¾ 0 é–‹å§‹) */</span>
<span class="sel">:nth-child(4n)</span> { 
  <span class="prop">background</span>: <span class="val">purple</span>; 
} <span class="cmmt">/* é¸å–ç¬¬ 4, 8, 12... å€‹å…ƒç´  */</span>

<span class="sel">:nth-child(3n + 1)</span> { ... } <span class="cmmt">/* é¸å–ç¬¬ 1, 4, 7... å€‹å…ƒç´  */</span></pre>
      </details>
    </section>

    <!-- 4. State -->
    <section id="sel-state">
      <h2>4. ç‹€æ…‹å½é¡ (UI State)</h2>
      <div class="state-demo">
        <form onsubmit="return false;">
          <input type="text" placeholder="Focus me (è®Šè‰²)" required>
          <input type="text" placeholder="Disabled input" disabled>
          <label style="cursor: pointer;">
            <input type="checkbox"> <span>Check me (æ–‡å­—è®Šç¶ )</span>
          </label>
        </form>
      </div>
      <details>
        <summary>æŸ¥çœ‹ CSS é—œéµå¯¦ä½œ</summary>
        <pre>
<span class="cmmt">/* ç•¶ä½¿ç”¨è€…é»æ“Šæˆ– Tab é€²å»æ™‚ */</span>
<span class="sel">input:focus</span> { <span class="prop">border-color</span>: <span class="val">blue</span>; }

<span class="cmmt">/* ç•¶ input æœ‰ disabled å±¬æ€§æ™‚ */</span>
<span class="sel">input:disabled</span> { <span class="prop">cursor</span>: <span class="val">not-allowed</span>; }

<span class="cmmt">/* Checkbox Hack çš„æ ¸å¿ƒï¼šé¸å–è¢«å‹¾é¸å…ƒç´  "å¾Œé¢" çš„å…„å¼Ÿ */</span>
<span class="sel">input:checked + span</span> { 
  <span class="prop">color</span>: <span class="val">green</span>; 
  <span class="prop">font-weight</span>: <span class="val">bold</span>;
}

<span class="cmmt">/* è¡¨å–®é©—è­‰ç‹€æ…‹ */</span>
<span class="sel">input:required</span> { ... } <span class="cmmt">/* å¿…å¡« */</span>
<span class="sel">input:valid</span> { ... }    <span class="cmmt">/* æ ¼å¼æ­£ç¢º */</span>
<span class="sel">input:invalid</span> { ... }  <span class="cmmt">/* æ ¼å¼éŒ¯èª¤ */</span></pre>
      </details>
    </section>

    <!-- 5. Pseudo-elements -->
    <section id="sel-pseudo">
      <h2>5. å½å…ƒç´  (Pseudo-elements)</h2>
      <div class="pseudo-elem-demo">
        <p>
          Lorem ipsum dolor sit amet. é¸å–é€™æ®µæ–‡å­—çœ‹çœ‹æ•ˆæœ (Selection)ã€‚
          é€™æ®µæ–‡å­—çš„ç¬¬ä¸€è¡Œæ¨£å¼ä¸åŒ (First-line)ï¼Œä¸”ç¬¬ä¸€å€‹å­—æ¯è¶…å¤§ (First-letter)ã€‚
        </p>
        <ul class="marker-demo">
          <li>è‡ªè¨‚åˆ—è¡¨ç¬¦è™Ÿ (::marker)</li>
          <li>ä½¿ç”¨ content å±¬æ€§</li>
        </ul>
      </div>
      <details>
        <summary>æŸ¥çœ‹ CSS é—œéµå¯¦ä½œ</summary>
        <pre>
<span class="cmmt">/* é¸å–ç¬¬ä¸€å€‹å­—æ¯ (å¸¸ç”¨æ–¼å ±ç´™æ’ç‰ˆ) */</span>
<span class="sel">p::first-letter</span> { 
  <span class="prop">font-size</span>: <span class="val">2em</span>; 
  <span class="prop">float</span>: <span class="val">left</span>; 
}

<span class="cmmt">/* é¸å–ç¬¬ä¸€è¡Œ (æœƒéš¨å®¹å™¨å¯¬åº¦è‡ªå‹•èª¿æ•´) */</span>
<span class="sel">p::first-line</span> { <span class="prop">color</span>: <span class="val">grey</span>; }

<span class="cmmt">/* æ”¹è®Šåç™½é¸å–æ™‚çš„é¡è‰² */</span>
<span class="sel">::selection</span> { 
  <span class="prop">background</span>: <span class="val">pink</span>; 
  <span class="prop">color</span>: <span class="val">white</span>; 
}

<span class="cmmt">/* ä¿®æ”¹ li çš„åœ“é»æ¨£å¼ */</span>
<span class="sel">li::marker</span> { <span class="prop">content</span>: <span class="val">"ğŸ‘‰ "</span>; }</pre>
      </details>
    </section>

    <!-- 6. Logic (New) -->
    <section id="sel-logic">
      <h2>6. ç¾ä»£é‚è¼¯å½é¡ (:is, :where, :has, :not)</h2>
      <div class="logic-demo logic-list">
        <h3>:not() å¦å®šé‚è¼¯</h3>
        <button class="primary">Primary Button</button>
        <button>Other Button (Opacity 0.6)</button>

        <h3>:has() çˆ¶å±¤é¸å–å™¨ (æœ€å¼·å¤§ï¼)</h3>
        <div class="card">
          <label><input type="checkbox"> å‹¾é¸æˆ‘ï¼Œå¡ç‰‡è®Šç¶ è‰²</label>
        </div>
        <div class="card">
          <label>æ™®é€šå¡ç‰‡</label>
        </div>
        <div class="card">
          <button class="delete">Hover Delete (å¡ç‰‡è®Šç´…)</button>
        </div>
      </div>
      <details>
        <summary>æŸ¥çœ‹ CSS é—œéµå¯¦ä½œ</summary>
        <pre>
<span class="cmmt">/* 1. å¦å®šé¸å– (:not) */</span>
<span class="sel">button:not(.primary)</span> { 
  <span class="prop">opacity</span>: <span class="val">0.6</span>; 
} <span class="cmmt">/* é™¤äº† .primary ä»¥å¤–çš„æ‰€æœ‰æŒ‰éˆ•éƒ½è®ŠåŠé€æ˜ */</span>

<span class="cmmt">/* 2. çˆ¶å±¤é¸å– (:has) - é€™æ˜¯ CSS çš„é©å‘½æ€§åŠŸèƒ½ */</span>
<span class="cmmt">/* é‚è¼¯ï¼šé¸å– .cardï¼Œä½†å‰ææ˜¯å®ƒ"æ“æœ‰"ä¸€å€‹è¢« checked çš„ input */</span>
<span class="sel">.card:has(input:checked)</span> { 
  <span class="prop">background</span>: <span class="val">#f0fdf4</span>; 
  <span class="prop">border-color</span>: <span class="val">green</span>; 
}

<span class="cmmt">/* é‚è¼¯ï¼šé¸å– .cardï¼Œä½†å‰ææ˜¯å®ƒ"æ“æœ‰"ä¸€å€‹æ­£åœ¨è¢« Hover çš„ .delete æŒ‰éˆ• */</span>
<span class="sel">.card:has(.delete:hover)</span> { 
  <span class="prop">background</span>: <span class="val">red</span>; 
}</pre>
      </details>
    </section>

    <!-- 7. Specificity -->
    <section id="specificity">
      <h2>7. æ¬Šé‡ç«¶æŠ€å ´ (Specificity Arena)</h2>
      <p>ID > Class > Elementã€‚å…§è¯æ¨£å¼ (Inline) æœ€é«˜ï¼Œ!important ç„¡è¦–è¦å‰‡ã€‚</p>
      
      <div class="spec-battle">
        <div class="spec-card">
          <span class="spec-score">Score: 1,0,0</span>
          <div id="id-wins" class="class-loses">
            æˆ‘æœ‰ ID (#id-wins) å’Œ Class (.class-loses)ã€‚<br>
            å³ä½¿ Class å¯«åœ¨å¾Œé¢ï¼ŒID é‚„æ˜¯è´äº† (è—è‰²)ã€‚
          </div>
        </div>
      </div>
      <div class="spec-visualizer">
        <div style="display:flex; gap:5px; align-items:flex-end; height: 50px;">
          <div style="width: 30px; height: 100%; background: var(--primary);" title="ID"></div>
          <div style="width: 30px; height: 10%; background: var(--error);" title="Class"></div>
          <div style="width: 30px; height: 1%; background: #ccc;" title="Tag"></div>
        </div>
        <small style="color:#64748b">ID çš„æ¬Šé‡æ˜¯ Class çš„ä¸€å€‹é‡ç´šä»¥ä¸Š</small>
      </div>
    </section>

    <!-- 8. Box Model -->
    <section id="boxmodel">
      <h2>8. ç›’æ¨¡å‹ (Box Model)</h2>
      <div style="display: flex; justify-content: center;">
        <div style="background: #fef3c7; padding: 40px; border: 1px dashed orange; position: relative;">
          <span style="position: absolute; top: 5px; left: 5px; font-size: 12px; color: orange;">Margin</span>
          <div style="background: #bfdbfe; padding: 40px; border: 4px solid #2563eb; position: relative;">
            <span style="position: absolute; top: 5px; left: 5px; font-size: 12px; color: #2563eb;">Border</span>
            <div style="background: #bbf7d0; padding: 40px; position: relative;">
              <span style="position: absolute; top: 5px; left: 5px; font-size: 12px; color: green;">Padding</span>
              <div style="background: white; width: 100px; height: 50px; display: flex; align-items: center; justify-content: center; font-weight: bold;">Content</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 9. Flexbox Interactive -->
    <section id="flexbox">
      <h2>9. Flexbox äº’å‹•å¯¦é©—å®¤</h2>
      
      <!-- Radio State Holders -->
      <input type="radio" name="fd" id="f-dir-row" class="hack-radio" checked>
      <input type="radio" name="fd" id="f-dir-col" class="hack-radio">
      <input type="radio" name="fw" id="f-wrap-no" class="hack-radio" checked>
      <input type="radio" name="fw" id="f-wrap-yes" class="hack-radio">
      
      <input type="radio" name="fj" id="f-jus-start" class="hack-radio" checked>
      <input type="radio" name="fj" id="f-jus-center" class="hack-radio">
      <input type="radio" name="fj" id="f-jus-end" class="hack-radio">
      <input type="radio" name="fj" id="f-jus-between" class="hack-radio">
      
      <input type="radio" name="fa" id="f-ali-start" class="hack-radio" checked>
      <input type="radio" name="fa" id="f-ali-center" class="hack-radio">
      <input type="radio" name="fa" id="f-ali-end" class="hack-radio">
      <input type="radio" name="fa" id="f-ali-stretch" class="hack-radio">

      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 20px;">
        <div class="ctrl-group">
          <div class="ctrl-title">Flex Direction</div>
          <div class="ctrl-labels">
            <label for="f-dir-row">row</label>
            <label for="f-dir-col">column</label>
          </div>
        </div>
        <div class="ctrl-group">
          <div class="ctrl-title">Flex Wrap</div>
          <div class="ctrl-labels">
            <label for="f-wrap-no">nowrap</label>
            <label for="f-wrap-yes">wrap</label>
          </div>
        </div>
        <div class="ctrl-group">
          <div class="ctrl-title">Justify Content (Main Axis)</div>
          <div class="ctrl-labels">
            <label for="f-jus-start">start</label>
            <label for="f-jus-center">center</label>
            <label for="f-jus-end">end</label>
            <label for="f-jus-between">between</label>
          </div>
        </div>
        <div class="ctrl-group">
          <div class="ctrl-title">Align Items (Cross Axis)</div>
          <div class="ctrl-labels">
            <label for="f-ali-start">start</label>
            <label for="f-ali-center">center</label>
            <label for="f-ali-end">end</label>
            <label for="f-ali-stretch">stretch</label>
          </div>
        </div>
      </div>

      <div class="flex-box-container">
        <div class="fb-item">1</div>
        <div class="fb-item">2</div>
        <div class="fb-item">3</div>
        <div class="fb-item">4</div>
        <div class="fb-item">5</div>
      </div>
      
      <details>
        <summary>æŸ¥çœ‹ CSS é—œéµå¯¦ä½œ</summary>
        <pre>
<span class="cmmt">/* é€™æ˜¯ä¸€å€‹ä½¿ç”¨ Radio Hack çš„äº’å‹•ç¯„ä¾‹ */</span>
<span class="cmmt">/* HTML: <input type="radio" id="f-dir-col"> ... <div class="container"> */</span>

<span class="cmmt">/* ç•¶ column è¢«é¸ä¸­æ™‚ï¼Œæ”¹è®Šå…„å¼Ÿå®¹å™¨çš„æ¨£å¼ */</span>
<span class="sel">#f-dir-col:checked ~ .container</span> {
  <span class="prop">flex-direction</span>: <span class="val">column</span>;
}

<span class="sel">#f-jus-center:checked ~ .container</span> {
  <span class="prop">justify-content</span>: <span class="val">center</span>;
}

<span class="cmmt">/* é€™ç¨®æŠ€å·§å¯ä»¥è®“ä½ ä¸éœ€è¦å¯«ä»»ä½• JS å°±èƒ½åšåˆ‡æ› */</span></pre>
      </details>
    </section>

    <!-- 10. Grid -->
    <section id="grid">
      <h2>10. Grid ä½ˆå±€ç³»çµ± (Grid Areas)</h2>
      <p>æœ€ç›´è§€çš„äºŒç¶­ä½ˆå±€æ–¹å¼ï¼šGrid Template Areasã€‚</p>
      <div class="grid-area-demo">
        <div class="ga-box ga-header">Header</div>
        <div class="ga-box ga-sidebar">Sidebar</div>
        <div class="ga-box ga-main">Main Content</div>
        <div class="ga-box ga-footer">Footer</div>
      </div>
      <details>
        <summary>æŸ¥çœ‹ CSS é—œéµå¯¦ä½œ</summary>
        <pre>
<span class="sel">.container</span> {
  <span class="prop">display</span>: <span class="val">grid</span>;
  <span class="cmmt">/* å®šç¾©æ¬„ä½æ¯”ä¾‹ï¼šå·¦é‚Š 1ç­‰ä»½ï¼Œå³é‚Š 3ç­‰ä»½ */</span>
  <span class="prop">grid-template-columns</span>: <span class="val">1fr 3fr</span>;
  
  <span class="cmmt">/* ASCII Art é¢¨æ ¼ä½ˆå±€ */</span>
  <span class="prop">grid-template-areas</span>: 
    <span class="val">"header header"</span>
    <span class="val">"sidebar main"</span>
    <span class="val">"footer footer"</span>;
}

<span class="cmmt">/* å°‡å­å…ƒç´ æŒ‡æ´¾çµ¦å°æ‡‰çš„å€åŸŸåç¨± */</span>
<span class="sel">.header-item</span> { <span class="prop">grid-area</span>: <span class="val">header</span>; }
<span class="sel">.sidebar-item</span> { <span class="prop">grid-area</span>: <span class="val">sidebar</span>; }</pre>
      </details>
    </section>

    <!-- 11. Advanced Patterns (Expert) -->
    <section id="patterns">
      <h2>11. å°ˆå®¶ç´šå¯¦æˆ° Patterns</h2>

      <!-- Floating Label -->
      <h3>A. Floating Label (æµ®å‹•æ¨™ç±¤)</h3>
      <div class="float-group">
        <input type="text" placeholder=" " required>
        <label>Username</label>
      </div>
      <details>
        <summary>æŸ¥çœ‹å®Œæ•´å¯¦ä½œä»£ç¢¼</summary>
        <pre>
<span class="cmmt">&lt;!-- HTML çµæ§‹è¦æ±‚ï¼šLabel å¿…é ˆåœ¨ Input "å¾Œé¢" --&gt;</span>
<span class="cmmt">&lt;!-- é—œéµï¼šplaceholder ä¸èƒ½æ˜¯ç©ºå­—ä¸²ï¼Œçµ¦å€‹ç©ºç™½ç¬¦ " " ä»¥ä¾¿ CSS åµæ¸¬ --&gt;</span>
<span class="tag">&lt;div class="group"&gt;</span>
  <span class="tag">&lt;input type="text" placeholder=" " required&gt;</span>
  <span class="tag">&lt;label&gt;</span>Username<span class="tag">&lt;/label&gt;</span>
<span class="tag">&lt;/div&gt;</span>

<span class="cmmt">/* CSS */</span>
<span class="sel">.group</span> { <span class="prop">position</span>: <span class="val">relative</span>; }

<span class="sel">label</span> {
  <span class="prop">position</span>: <span class="val">absolute</span>;
  <span class="prop">top</span>: <span class="val">50%</span>; <span class="cmmt">/* é è¨­åœ¨ä¸­é–“ */</span>
  <span class="prop">pointer-events</span>: <span class="val">none</span>; <span class="cmmt">/* è®“é»æ“Šç©¿é€åˆ° input */</span>
  <span class="prop">transition</span>: <span class="val">0.2s</span>;
}

<span class="cmmt">/* è§¸ç™¼æ¢ä»¶ï¼š1. Input è¢« Focus  OR  2. Input è£¡é¢æœ‰å­— (é placeholder é¡¯ç¤ºç‹€æ…‹) */</span>
<span class="sel">input:focus + label</span>,
<span class="sel">input:not(:placeholder-shown) + label</span> {
  <span class="prop">top</span>: <span class="val">0</span>;
  <span class="prop">font-size</span>: <span class="val">0.75rem</span>;
  <span class="prop">color</span>: <span class="val">blue</span>;
}</pre>
      </details>

      <!-- Friendly Validation -->
      <h3>B. Friendly Validation (å‹å–„é©—è­‰)</h3>
      <div style="max-width: 300px;">
        <input type="email" class="valid-input" placeholder=" " required>
        <div class="err-msg">è«‹è¼¸å…¥æœ‰æ•ˆçš„ Email åœ°å€</div>
      </div>
      <p style="font-size: 0.8rem; color: #64748b; margin-top: 5px;">è©¦è‘—è¼¸å…¥éŒ¯èª¤çš„ email æ ¼å¼ç„¶å¾Œé›¢é–‹ç„¦é»ã€‚</p>
      <details>
        <summary>æŸ¥çœ‹å®Œæ•´å¯¦ä½œä»£ç¢¼</summary>
        <pre>
<span class="cmmt">/* å•é¡Œï¼šinput:invalid é è¨­ä¸€é€²ç•«é¢å°±æœƒè®Šç´… (å› ç‚ºç©ºå­—ä¸²ä¹Ÿæ˜¯ invalid) */</span>
<span class="cmmt">/* è§£æ³•ï¼šåˆ©ç”¨ :not(:placeholder-shown) æ’é™¤æ‰ã€Œé‚„æ²’æ‰“å­—ã€çš„ç‹€æ…‹ */</span>

<span class="cmmt">/* é‚è¼¯ï¼š(å·²ç¶“æœ‰æ‰“å­—) AND (æ ¼å¼ä¸æ­£ç¢º) */</span>
<span class="sel">input:not(:placeholder-shown):invalid</span> {
  <span class="prop">border-color</span>: <span class="val">red</span>;
  <span class="prop">background</span>: <span class="val">#fef2f2</span>;
}

<span class="cmmt">/* æ§åˆ¶éŒ¯èª¤è¨Šæ¯çš„é¡¯ç¤º */</span>
<span class="sel">.error-msg</span> { <span class="prop">display</span>: <span class="val">none</span>; }

<span class="sel">input:not(:placeholder-shown):invalid ~ .error-msg</span> {
  <span class="prop">display</span>: <span class="val">block</span>;
}</pre>
      </details>

      <!-- RAM Layout -->
      <h3>C. RAM Grid Layout</h3>
      <p>ç¸®æ”¾è¦–çª—è§€å¯Ÿè‡ªå‹•æ–·è¡Œ (No Media Queries)ã€‚</p>
      <div class="ram-grid">
        <div class="ram-item">Auto</div>
        <div class="ram-item">Fit</div>
        <div class="ram-item">Min</div>
        <div class="ram-item">Max</div>
      </div>
      <details>
        <summary>æŸ¥çœ‹å®Œæ•´å¯¦ä½œä»£ç¢¼</summary>
        <pre>
<span class="cmmt">/* RAM: Repeat, Auto-fit, Minmax */</span>
<span class="sel">.container</span> {
  <span class="prop">display</span>: <span class="val">grid</span>;
  <span class="prop">gap</span>: <span class="val">1rem</span>;
  
  <span class="cmmt">/* é­”æ³•å’’èªï¼š */</span>
  <span class="cmmt">/* 1. minmax(150px, 1fr): å¡ç‰‡æœ€å° 150pxï¼Œæœ€å¤§ä½”æ»¿å‰©é¤˜ç©ºé–“ */</span>
  <span class="cmmt">/* 2. repeat(auto-fit, ...): ç€è¦½å™¨è‡ªå‹•è¨ˆç®—ä¸€è¡Œèƒ½å¡å¹¾å€‹ 150pxï¼Œè‡ªå‹•æ›è¡Œ */</span>
  <span class="prop">grid-template-columns</span>: <span class="val">repeat(auto-fit, minmax(150px, 1fr))</span>;
}</pre>
      </details>

      <!-- Sidebar -->
      <h3>D. Pure CSS Sidebar</h3>
      <label for="sidebar-check" class="sidebar-trigger-btn">é–‹å•Ÿå´é‚Šæ¬„ (Toggle Sidebar)</label>
      <details>
        <summary>æŸ¥çœ‹å®Œæ•´å¯¦ä½œä»£ç¢¼</summary>
        <pre>
<span class="cmmt">&lt;!-- çµæ§‹ï¼šCheckbox å¿…é ˆåœ¨ Sidebar ä¹‹å‰ --&gt;</span>
<span class="tag">&lt;input type="checkbox" id="toggle" hidden&gt;</span>
<span class="tag">&lt;aside class="sidebar"&gt;</span>...<span class="tag">&lt;/aside&gt;</span>
<span class="tag">&lt;label for="toggle" class="overlay"&gt;</span><span class="tag">&lt;/label&gt;</span>

<span class="cmmt">/* 1. åˆå§‹ç‹€æ…‹ï¼šè—åœ¨ç•«é¢å³å´å¤–é¢ */</span>
<span class="sel">.sidebar</span> {
  <span class="prop">position</span>: <span class="val">fixed</span>;
  <span class="prop">right</span>: <span class="val">-300px</span>; <span class="cmmt">/* å¯¬åº¦å¤šå°‘å°±è—å¤šå°‘ */</span>
  <span class="prop">transition</span>: <span class="val">0.3s</span>;
}

<span class="cmmt">/* 2. è§¸ç™¼ç‹€æ…‹ï¼šç•¶ checkbox è¢«å‹¾é¸æ™‚ï¼Œå°‡ sidebar ç§»å›ä¾† */</span>
<span class="sel">#toggle:checked ~ .sidebar</span> {
  <span class="prop">right</span>: <span class="val">0</span>;
}

<span class="cmmt">/* 3. é®ç½©å±¤é€£å‹• */</span>
<span class="sel">#toggle:checked ~ .overlay</span> {
  <span class="prop">opacity</span>: <span class="val">1</span>;
  <span class="prop">pointer-events</span>: <span class="val">auto</span>;
}</pre>
      </details>

      <!-- Scroll Progress -->
      <h3>E. Scroll Driven Animation</h3>
      <p>è«‹çœ‹é é¢æœ€é ‚éƒ¨çš„å½©è‰²ç·šæ¢ã€‚</p>
      <details>
        <summary>æŸ¥çœ‹å®Œæ•´å¯¦ä½œä»£ç¢¼</summary>
        <pre>
<span class="sel">.progress-bar</span> {
  <span class="prop">position</span>: <span class="val">fixed</span>;
  <span class="prop">top</span>: <span class="val">0</span>; 
  <span class="prop">width</span>: <span class="val">100%</span>;
  <span class="prop">transform-origin</span>: <span class="val">0%</span>; <span class="cmmt">/* å¾å·¦é‚Šé–‹å§‹é•· */</span>
  
  <span class="cmmt">/* ç¶å®šå‹•ç•« */</span>
  <span class="prop">animation</span>: <span class="val">grow auto linear</span>;
  <span class="cmmt">/* é—œéµï¼šæ™‚é–“è»¸ç¶å®šæ²å‹•è»¸ (Scroll Timeline) */</span>
  <span class="prop">animation-timeline</span>: <span class="val">scroll()</span>; 
}

<span class="sel">@keyframes grow</span> {
  <span class="prop">from</span> { <span class="prop">transform</span>: <span class="val">scaleX(0)</span>; }
  <span class="prop">to</span>   { <span class="prop">transform</span>: <span class="val">scaleX(1)</span>; }
}</pre>
      </details>
      
    </section>

    <!-- 12. JS Rendering -->
    <section id="js-render">
      <h2>12. JS æ¸²æŸ“æ©Ÿåˆ¶å¯¦æˆ° (Height 0 to Auto)</h2>
      <p>é€™å€‹ç¯„ä¾‹å±•ç¤ºäº†å¦‚ä½•åˆ©ç”¨ JS çš„æ¸²æŸ“ç‰¹æ€§ï¼Œå¯¦ç¾ CSS åšä¸åˆ°çš„ <code>height: auto</code> å‹•ç•«ã€‚</p>

      <div class="js-demo-container">
        <button onclick="toggleHeight()" class="sidebar-trigger-btn" style="background: var(--primary);">
          åˆ‡æ›é«˜åº¦ (Toggle Height)
        </button>
        <div class="status-log" id="log" style="margin-top:10px; font-size: 0.85rem; color: #64748b;">ç­‰å¾…æ“ä½œ...</div>
        
        <div id="accordion" style="margin-top: 15px; background: #e0e7ff; overflow: hidden; height: 0; transition: height 0.4s ease-out; border-radius: 6px;">
          <div style="padding: 20px;">
            <h4 style="margin-top:0;">å‹•æ…‹å…§å®¹å€åŸŸ</h4>
            <p>é€™è£¡çš„å…§å®¹é«˜åº¦æ˜¯ä¸å›ºå®šçš„ã€‚</p>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
            <p>ç•¶ä½ é»æ“ŠæŒ‰éˆ•æ™‚ï¼ŒJS æœƒå…ˆè¨ˆç®—é€™è£¡æœ‰å¤šé«˜ï¼Œç„¶å¾Œå¼·åˆ¶ç€è¦½å™¨å¾ 0 å‹•ç•«éæ¸¡åˆ°è©²é«˜åº¦ã€‚</p>
          </div>
        </div>
      </div>

      <script>
        const acc = document.getElementById('accordion');
        const log = document.getElementById('log');
        let isOpen = false;

        function toggleHeight() {
          if (isOpen) {
            // Close logic
            // 1. å…ˆæŠŠé«˜åº¦è¨­ç‚ºå…·é«”çš„ px (å¾ auto è½‰ç‚ºæ•¸å€¼ï¼Œé€™æ¨£æ‰æœ‰è¾¦æ³• transition)
            acc.style.height = acc.scrollHeight + 'px';
            
            // 2. å¼·åˆ¶é‡æ’ (Force Reflow) - é—œéµï¼è®“ç€è¦½å™¨æ„è­˜åˆ°é«˜åº¦å·²ç¶“è®Šæˆ px äº†
            acc.offsetHeight; 

            // 3. è¨­å®šç‚º 0
            acc.style.height = '0px';
            log.innerText = 'Closing... (Height set to 0)';
          } else {
            // Open logic (ä½ çš„æ¡ˆä¾‹)
            // 1. é›–ç„¶ç¾åœ¨æ˜¯ 0ï¼Œä½†æˆ‘å€‘å¯ä»¥è®€å– scrollHeight æ‹¿åˆ°ã€Œå¦‚æœå…¨é–‹æœƒæ˜¯å¤šå°‘ã€
            //    é€™æœƒè§¸ç™¼åŒæ­¥ Layoutï¼Œä½†ä¸æœƒ Paint (æ‰€ä»¥ç•«é¢ä¸æœƒé–ƒ)
            const targetHeight = acc.scrollHeight;
            
            // 2. è¨­å®šç›®æ¨™é«˜åº¦
            acc.style.height = targetHeight + 'px';
            log.innerText = `Opening... (Calculated height: ${targetHeight}px)`;

            // 3. (Optional) å‹•ç•«çµæŸå¾Œè¨­å› autoï¼Œä»¥æ‡‰å°è¦–çª—ç¸®æ”¾
            acc.addEventListener('transitionend', function() {
              if (isOpen) acc.style.height = 'auto';
            }, { once: true });
          }
          isOpen = !isOpen;
        }
      </script>

      <details>
        <summary>æŸ¥çœ‹ JS å¯¦ä½œä»£ç¢¼</summary>
        <pre>
<span class="sel">const</span> <span class="prop">el</span> = <span class="val">element</span>;

<span class="cmmt">// é–‹å•Ÿå‹•ç•« (0 -> Auto)</span>
<span class="cmmt">// 1. ç²å–å…§å®¹çš„çœŸå¯¦é«˜åº¦ (è§¸ç™¼åŒæ­¥ Layout)</span>
<span class="cmmt">//    ä½¿ç”¨è€…çœ‹ä¸åˆ°é€™å€‹è¨ˆç®—éç¨‹ï¼Œå› ç‚º JS é‚„æ²’çµæŸï¼Œç€è¦½å™¨é‚„æ²’ Paint</span>
<span class="sel">const</span> <span class="prop">height</span> = <span class="val">el.scrollHeight</span>;

<span class="cmmt">// 2. è¨­å®šé«˜åº¦ï¼Œè§¸ç™¼ CSS Transition</span>
<span class="val">el.style.height</span> = <span class="prop">height</span> + <span class="val">'px'</span>;


<span class="cmmt">// é—œé–‰å‹•ç•« (Auto -> 0)</span>
<span class="cmmt">// 1. å¿…é ˆå…ˆå¾ 'auto' è®Šå›å…·é«”çš„ px å€¼</span>
<span class="val">el.style.height</span> = <span class="val">el.scrollHeight</span> + <span class="val">'px'</span>;

<span class="cmmt">// 2. ã€é—œéµã€‘å¼·åˆ¶ Reflowï¼Œè®“ç€è¦½å™¨ç¢ºèªç¾åœ¨æ˜¯ px é«˜åº¦</span>
<span class="cmmt">//    å¦‚æœä¸åŠ é€™è¡Œï¼Œç€è¦½å™¨æœƒæŠŠé€™å…©æ­¥åˆä½µï¼Œå°è‡´ç„¡æ³•å¾ auto éæ¸¡</span>
<span class="val">el.offsetHeight</span>;

<span class="cmmt">// 3. è¨­å®šç‚º 0</span>
<span class="val">el.style.height</span> = <span class="val">'0px'</span>;</pre>
      </details>
    </section>

      
    </section>

    <!-- 13. @property (Houdini) -->
    <section id="houdini">
      <h2>13. @propertyï¼šè®“æ¼¸å±¤å‹•èµ·ä¾† (Houdini)</h2>
      <p>å‚³çµ±ä¸Šï¼Œ<code>linear-gradient</code> æ˜¯ç„¡æ³•åš <code>transition</code> çš„ã€‚é€é <code>@property</code> å®šç¾©è®Šæ•¸é¡å‹ï¼Œæˆ‘å€‘å¯ä»¥è§£é–é€™å€‹èƒ½åŠ›ã€‚</p>
      <p style="font-size: 0.8rem; color: #d97706;">(è«‹å°‡æ»‘é¼ æ‡¸åœåœ¨å¡ç‰‡ä¸Š)</p>

      <div class="houdini-card">
        Hover Me
      </div>

      <style>
        /* 1. å®šç¾©è®Šæ•¸é¡å‹ */
        @property --gradient-angle {
          syntax: '<angle>';
          initial-value: 0deg;
          inherits: false;
        }

        @property --gradient-color {
          syntax: '<color>';
          initial-value: #4f46e5;
          inherits: false;
        }

        .houdini-card {
          width: 200px; height: 120px;
          border-radius: 12px;
          display: flex; align-items: center; justify-content: center;
          color: white; font-weight: bold; cursor: pointer;
          
          /* 2. ä½¿ç”¨è®Šæ•¸ */
          background: linear-gradient(var(--gradient-angle), var(--gradient-color), #ec4899);
          
          /* 3. å®šç¾©éæ¸¡ï¼šç¾åœ¨ç€è¦½å™¨çŸ¥é“é€™æ˜¯ è§’åº¦ å’Œ é¡è‰²ï¼Œæ‰€ä»¥å¯ä»¥è£œé–“ */
          transition: --gradient-angle 1s ease, --gradient-color 1s ease, transform 0.3s;
        }

        .houdini-card:hover {
          --gradient-angle: 360deg;
          --gradient-color: #06b6d4;
          transform: scale(1.05);
        }
      </style>

      <details>
        <summary>æŸ¥çœ‹ CSS é—œéµå¯¦ä½œ</summary>
        <pre>
<span class="sel">@property --angle</span> {
  <span class="prop">syntax</span>: <span class="val">'&lt;angle&gt;'</span>; <span class="cmmt">/* é—œéµï¼šå‘Šè¨´ç€è¦½å™¨é€™æ˜¯è§’åº¦ï¼Œä¸æ˜¯å­—ä¸² */</span>
  <span class="prop">initial-value</span>: <span class="val">0deg</span>;
  <span class="prop">inherits</span>: <span class="val">false</span>;
}

<span class="sel">.card</span> {
  <span class="prop">background</span>: <span class="val">linear-gradient(var(--angle), blue, red)</span>;
  <span class="prop">transition</span>: <span class="val">--angle 1s</span>; <span class="cmmt">/* é€™æ¨£å°±èƒ½å‹•äº†ï¼ */</span>
}

<span class="sel">.card:hover</span> {
  <span class="prop">--angle</span>: <span class="val">360deg</span>;
}</pre>
      </details>
    </section>

    <!-- 14. Anchor Positioning -->
    <section id="anchor-pos">
      <h2>14. åŸç”ŸéŒ¨é»å®šä½ (Anchor Positioning)</h2>
      <p>ç„¡éœ€ JavaScript è¨ˆç®—åº§æ¨™ï¼Œç›´æ¥ç”¨ CSS å°‡ B å…ƒç´ ç¶å®šåˆ° A å…ƒç´ æ—ã€‚</p>
      <p style="font-size: 0.8rem; color: #64748b;">(æ³¨æ„ï¼šç›®å‰åƒ… Chrome/Edge 125+ æ”¯æ´)</p>

      <div style="position: relative; height: 150px; border: 1px dashed #ccc; margin-top: 20px;">
        <button class="anchor-btn">æˆ‘æ˜¯éŒ¨é» (Anchor)</button>
        <div class="anchor-tooltip">æˆ‘æ˜¯ Tooltip</div>
      </div>

      <style>
        .anchor-btn {
          anchor-name: --my-anchor; /* å®šç¾©éŒ¨é»åç¨± */
          
          position: absolute; top: 50%; left: 30%; transform: translate(-50%, -50%);
          padding: 10px 20px; background: var(--text); color: white; border: none; border-radius: 6px;
        }

        .anchor-tooltip {
          position: absolute;
          position-anchor: --my-anchor; /* ç¶å®šéŒ¨é» */
          
          /* å®šä½é‚è¼¯ï¼šåº•éƒ¨å°é½ŠéŒ¨é»çš„é ‚éƒ¨ï¼Œå·¦é‚Šå°é½ŠéŒ¨é»çš„å³é‚Š */
          bottom: anchor(top);
          left: anchor(right);
          margin-left: 10px;
          
          background: var(--primary); color: white; padding: 5px 10px; border-radius: 4px; font-size: 0.8rem;
        }
        
        /* Fallback for browsers without anchor support */
        @supports not (anchor-name: --a) {
          .anchor-tooltip::after { content: " (ç€è¦½å™¨ä¸æ”¯æ´ Anchor)"; font-size: 0.7em; opacity: 0.7; }
        }
      </style>

      <details>
        <summary>æŸ¥çœ‹ CSS é—œéµå¯¦ä½œ</summary>
        <pre>
<span class="sel">.button</span> {
  <span class="prop">anchor-name</span>: <span class="val">--my-target</span>;
}

<span class="sel">.tooltip</span> {
  <span class="prop">position</span>: <span class="val">absolute</span>;
  <span class="prop">position-anchor</span>: <span class="val">--my-target</span>;
  
  <span class="cmmt">/* é­”æ³•å‡½æ•¸ anchor() */</span>
  <span class="prop">top</span>: <span class="val">anchor(bottom)</span>;   <span class="cmmt">/* è²¼é½Šä¸‹æ–¹ */</span>
  <span class="prop">left</span>: <span class="val">anchor(center)</span>;  <span class="cmmt">/* æ°´å¹³ç½®ä¸­ */</span>
  <span class="prop">transform</span>: <span class="val">translateX(-50%)</span>;
}</pre>
      </details>
    </section>

    <!-- 15. View Transitions -->
    <section id="view-trans">
      <h2>15. è¦–åœ–éæ¸¡ (View Transitions API)</h2>
      <p>é€™æ˜¯ä¸€å€‹ JS APIï¼Œä½†å®ƒèƒ½è‡ªå‹•ç”¢ç”Ÿ CSS å‹•ç•«ä¾†å¹³æ»‘ DOM çš„è®ŠåŒ–ã€‚</p>
      
      <div class="vt-demo">
        <button onclick="moveItem()" style="margin-bottom: 10px; padding: 8px 16px; cursor: pointer;">
          ç§»å‹•åœ“çƒ (Trigger Transition)
        </button>
        
        <div class="vt-container" style="display: flex; gap: 20px; height: 80px; background: #f1f5f9; padding: 10px; border-radius: 8px;">
          <div id="box-a" style="flex: 1; border: 2px dashed #ccc; display: flex; align-items: center; justify-content: center;">
            <div id="ball" style="width: 40px; height: 40px; background: var(--secondary); border-radius: 50%; view-transition-name: ball;"></div>
          </div>
          <div id="box-b" style="flex: 1; border: 2px dashed #ccc; display: flex; align-items: center; justify-content: center;"></div>
        </div>
      </div>

      <script>
        function moveItem() {
          // æª¢æŸ¥ç€è¦½å™¨æ˜¯å¦æ”¯æ´
          if (!document.startViewTransition) {
            performMove(); // ä¸æ”¯æ´å°±ç›´æ¥è·‘
            return;
          }

          // å•Ÿå‹•è¦–åœ–éæ¸¡
          document.startViewTransition(() => {
            performMove();
          });
        }

        function performMove() {
          const ball = document.getElementById('ball');
          const boxA = document.getElementById('box-a');
          const boxB = document.getElementById('box-b');
          
          if (boxA.contains(ball)) {
            boxB.appendChild(ball);
          } else {
            boxA.appendChild(ball);
          }
        }
      </script>

      <details>
        <summary>æŸ¥çœ‹é—œéµå¯¦ä½œä»£ç¢¼</summary>
        <pre>
<span class="cmmt">/* CSS: çµ¦è¦ç§»å‹•çš„å…ƒç´ ä¸€å€‹å”¯ä¸€çš„ transition-name */</span>
<span class="sel">#ball</span> {
  <span class="prop">view-transition-name</span>: <span class="val">moving-ball</span>;
}

<span class="cmmt">/* JS: ä½¿ç”¨ API åŒ…è£¹ DOM ä¿®æ”¹æ“ä½œ */</span>
<span class="sel">document.startViewTransition</span>(() => {
  <span class="cmmt">// é€™è£¡åªéœ€è¦åšå–®ç´”çš„ DOM ç§»å‹• (appendChild)</span>
  <span class="cmmt">// ç€è¦½å™¨æœƒè‡ªå‹•è¨ˆç®—èˆŠä½ç½®å’Œæ–°ä½ç½®ï¼Œä¸¦ç”¢ç”Ÿé£›è¡Œå‹•ç•«ï¼</span>
  <span class="val">newContainer.appendChild(ball)</span>;
});</pre>
      </details>
    </section>

  </main>
</body>
</html>